# Changelog
Alle nennenswerten Ã„nderungen an diesem Projekt werden in diesem Dokument festgehalten.

Das Format orientiert sich an [Keep a Changelog](https://keepachangelog.com/de/1.0.0/)
und dieses Projekt nutzt [Semantische Versionierung](https://semver.org/lang/de/).

## [1.3.0] â€“ 2025-09-03
### HinzugefÃ¼gt
- **Event-Bearbeitung im Script** (`editEvent`): Titel, Ort (Venue/Stadt), Datum, Uhrzeit & Status direkt Ã¤ndern.
- **Kalender-Verwaltung**: Auswahl eines schreibbaren Kalenders, Speicherung im Keychain (`preferredCalendar`), erneute Auswahl oder Entfernen mÃ¶glich.
- **Kalender-Export** (`exportToCalendar`): Dauerwahl (1â€“4 h oder ganztÃ¤gig), korrekte All-Day-Behandlung (00:00â€“00:00+1).
- **Einstellungen-MenÃ¼** (`showSettingsMenu`): Kalender wÃ¤hlen/Ã¤ndern, â€Alle Events lÃ¶schenâ€œ, â€Info & Versionâ€œ.
- **Info-Ansicht** (`showInfoTable`): Versionsanzeige (1.3.0), Featureliste, Easteregg (Tap-Counter), Buttons zu GitHub & â€Release Notesâ€œ.
- **Teilen-Funktionen**: 
  - Einzelnes Event teilen (`shareSingleEvent`).
  - Nur kommende Events gesammelt teilen (`shareEvents`) â€“ formatiert fÃ¼r Messenger.
- **HTML-Entity-Bereinigung** (`decodeHtmlEntities` + Auto-Clean in `loadEvents`): korrekte Anzeige von Umlauten & Sonderzeichen.
- **Widget-Verbesserungen** (`createWidget`):
  - Filter per Widget-Parameter: Status (`ticket`/`interesse`) & Zeitraum (`heute`, `woche`, `monat`, `alle`).
  - Countdown-Hinweise (â€heuteâ€œ, â€morgenâ€œ, â€in x Tagenâ€œ).
  - Dynamische Divider, Icons abhÃ¤ngig von Status/Dringlichkeit.
  - Mehrere EintrÃ¤ge je nach Widget-GrÃ¶ÃŸe.

### GeÃ¤ndert
- **Parsing von Eventim-Seiten** (`addEvent`): robustere Extraktion von Titel, Venue, Stadt, Datum/Zeit (Fallback via `<meta name="description">`).
- **Listenansichten** (`showEvents`): Gruppierung nach Monat; klare Sektionen â€Kommendeâ€œ/â€Vergangeneâ€œ, optische Akzente (Headerfarben/Hintergrund).
- **Sortierung**: konsistent nach Startdatum in allen Flows.
- **Datum/Zeit-Formatierung**: zentrale Helper (`formatGermanDate`, `formatDateInput`, `formatTimeInput`).
- **Logging & UX**: prÃ¤zisere Konsolen-Ausgaben (âœ…/âŒ/ğŸ“‚/ğŸ§¼), verstÃ¤ndliche Alerts bei Eingabe-/Netzwerkfehlern.

### Behoben
- **Doppelte Events**: DuplikatprÃ¼fung (gleiches Datum **oder** gleiche URL) verhindert MehrfacheintrÃ¤ge.
- **Sonderzeichen-Anzeige**: falsch dargestellte Entities (z. B. `&amp;`, `&quot;`) werden korrekt dekodiert.
- **Teilen ohne Events**: sauberer Fehlerdialog statt Abbruch.
- **Kalender-Persistenz**: Probleme mit der gespeicherten Auswahl behoben (Keychain-Handling).
- **Zeitfenster im Widget**: falsche Filter-/Zeitraumtreffer korrigiert.

### Entfernt
- N/A â€“ keine Funktionen explizit entfernt.

### Technische Ã„nderungen
- **Modularisierung**: klare FunktionsblÃ¶cke (`showMainMenu`, `showSettingsMenu`, `showEvents`, `showEventMenu`, â€¦).
- **Datenhaltung**: iCloud-Verzeichnis `EventCalendar/` mit `events.json` und `selectedCalendar.txt`; Auto-Anlage bei Bedarf.
- **Versions-/Easteregg-Mechanik**: Tap-Counter im Keychain (`eventkalender_version_taps`).

### Migration/Notizen
- Existierende `events.json` wird beim Laden automatisch bereinigt (HTML-Entities); keine manuelle Migration nÃ¶tig.
- Bevorzugter Kalender wird im **Keychain** unter `preferredCalendar` gespeichert. Bei Problemen in den Einstellungen entfernen und neu wÃ¤hlen.

---

## [1.0.0] â€“ Initiale Version (B)
- Grundlegender Import von Eventdaten (Eventim-Link).
- Speicherung in `events.json`, einfache Anzeige/Widget-Basis.